{% macro activeBlueprint(blueprint) %}
	{% if request.blueprint == blueprint %}active{% endif %}
{% endmacro %}

{% macro NavLink(endpoint, text, type='dropdown-item') %}
	<a class="{{ type }} {% if request.endpoint == endpoint %}active{% endif %}" href="{{ url_for(endpoint) }}">{{ text }}</a>
{% endmacro %}
{#- -------------------------------- -#}
<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
	<a class="navbar-brand" href="/logged">
		ONEPIC
	</a>
	<button class="navbar-toggler custom-toggler" type="button" data-toggle="collapse" data-target="#onepic_nav_global" aria-controls="onepic_nav_global" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>

	<div class="collapse navbar-collapse" id="onepic_nav_global">
		<ul class="navbar-nav mr-auto">
			<!-- Dictionary -->
			{% set blueprint = 'dictionary' %}
			<li class="nav-item dropdown {{ activeBlueprint(blueprint) }}">
				<a class="nav-link dropdown-toggle" href="#" id="{{ blueprint }}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ blueprint|title }}</a>
				<div class="dropdown-menu" aria-labelledby="{{ blueprint }}">
					{{ NavLink('dictionary.index', 'General') }}
					{{ NavLink('dictionary.donor_type', 'On Donor Type') }}
					{{ NavLink('dictionary.marketing_cycle', 'On Marketing Cycle') }}
				</div>
			</li>
			<!-- MailBox -->
			{% set blueprint = 'mailbox' %}
			<li class="nav-item dropdown {{ activeBlueprint(blueprint) }}">
				<a class="nav-link dropdown-toggle" href="#" id="{{ blueprint }}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ blueprint|title }}</a>
				<div class="dropdown-menu" aria-labelledby="{{ blueprint }}">
					{{ NavLink('mailbox.index', 'Today') }}
					{{ NavLink('mailbox.daily', 'Daily') }}
					{{ NavLink('mailbox.monthly', 'Monthly') }}
					{{ NavLink('mailbox.excel_list', 'Excel List') }}
				</div>
			</li>
			<!-- Private Revenue -->
			{% set blueprint = 'privenue' %}
			<li class="nav-item dropdown {{ activeBlueprint(blueprint) }}">
				<a class="nav-link dropdown-toggle" href="#" id="{{ blueprint }}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ blueprint|title }}</a>
				<div class="dropdown-menu" aria-labelledby="{{ blueprint }}">
					{{ NavLink('privenue.index', 'Overview') }}
					{{ NavLink('privenue.sourcecode1', 'Source Codes Created (June-June)') }}
					{{ NavLink('privenue.pending', 'Pending Batches') }}
				</div>
			</li>
			<!-- Donor Statistics -->
			{% set blueprint = 'stats' %}
			<li class="nav-item dropdown {{ activeBlueprint(blueprint) }}">
				<a class="nav-link dropdown-toggle" href="#" id="{{ blueprint }}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ blueprint|title }}</a>
				<div class="dropdown-menu" aria-labelledby="{{ blueprint }}">
					{{ NavLink('stats.fishing_pool', 'Fishing Pool') }}
				</div>
			</li>
			<!-- Journey -->
			{% set blueprint = 'journey' %}
			<li class="nav-item dropdown {{ activeBlueprint(blueprint) }}">
				<a class="nav-link dropdown-toggle" href="#" id="{{ blueprint }}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ blueprint|title }}</a>
				<div class="dropdown-menu" aria-labelledby="{{ blueprint }}">
					{{ NavLink('journey.cure_one', 'Cure One') }}
					{{ NavLink('journey.general_new', 'General New Donor') }}
					{{ NavLink('journey.merchandise_new', 'New Merchandise Customer') }}
				</div>
			</li>
			<!-- Private Revenue -->
			{% set blueprint = 'merchandise' %}
			<li class="nav-item dropdown {{ activeBlueprint(blueprint) }}">
				<a class="nav-link dropdown-toggle" href="#" id="{{ blueprint }}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ blueprint|title }}</a>
				<div class="dropdown-menu" aria-labelledby="{{ blueprint }}">
					{{ NavLink('merchandise.upload', 'RFM') }}
				</div>
			</li>

			<!-- API -->
			<li class="nav-item {{ activeBlueprint('api') }}">
				{{ NavLink('api.index', 'API', 'nav-link') }}
			</li>
		</ul>

		{% if current_user.is_authenticated %}
		<form class="form-inline my-2 my-md-0">
			<a href="/logout" class="btn btn-outline-warning btn-sm" role="button" aria-pressed="true">Logout</a>
		</form>
		{% endif %}
	</div>
</nav>
