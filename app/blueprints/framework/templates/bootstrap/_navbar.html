{% macro blueprintNavItem(blueprint, maxlevel, links) %}
<li class="nav-item {% if maxlevel > 1 %}dropdown{% endif %} {% if request.blueprint == blueprint %}active{% endif %}">
{% if maxlevel > 1 %}
	<a class="nav-link dropdown-toggle {% if request.blueprint == blueprint %}active{% endif %}" href="#" id="{{ blueprint }}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ blueprint|title }}</a>
	<div class="dropdown-menu aria-labelledby="{{ blueprint }}">
	{% for endpoint, text in links %}

		{% if endpoint %}
		<a class="dropdown-item {% if request.endpoint == blueprint+'.'+endpoint %}active{% endif %}" href="{{ url_for(blueprint+'.'+endpoint) }}">{{ text }}</a>
		{% else %}
		<div class="dropdown-divider"></div>
		{% endif %}
	{% endfor %}
	</div>
{% elif maxlevel == 1 %}
	{% for endpoint, text in links %}
	<a class="nav-link {% if request.endpoint == blueprint+'.'+endpoint %}active{% endif %}" href="{{ url_for(blueprint+'.'+endpoint) }}">{{ text }}</a>
	{% endfor %}
{% else %}
{% endif %}
</li>
{% endmacro %}


{#- -------------------------------- -#}
<nav class="navbar navbar-expand-lg fixed-top" id="navbar-global">
	<a class="navbar-brand" href="/logged">
		&#127912;ONEPIC
	</a>
	<button class="navbar-toggler custom-toggler" type="button" data-toggle="collapse" data-target="#onepic_nav_global" aria-controls="onepic_nav_global" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>

	<div class="collapse navbar-collapse" id="onepic_nav_global">
		<ul class="navbar-nav mr-auto">
			<!-- Dictionary -->
			<!-- {{ blueprintNavItem('dictionary', 2,
				 [('index', 'General')
				,('donor_type', 'On Donor Type')
				,('marketing_cycle', 'On Marketing Cycle')
			]) }} -->

			<!-- MailBox -->
			{{ blueprintNavItem('mailbox', 2,
				[('index', 'Today')
				,('daily', 'Daily')
				,('monthly', 'Monthly')
				,('excel_list', 'Excel List')
			]) }}

			<!-- Private Revenue -->
			{{ blueprintNavItem('privenue', 2,
				[('index', 'Overview')
				,('comparative', 'Comparative View')
				,('revenue_streams', 'Revenue Streams')
				,('single_campaign', 'Single Campaign Dashboard')
				,('sourcecode1', 'Source Codes Checking List')
				,('pending', 'Pending Batches')
			]) }}

			<!-- Donor Statistics -->
			{{ blueprintNavItem('stats', 2,
				[('contacts_snapshot', 'Contacts Snapshot')
				,('fishing_pool', 'Fishing Pool')
				,('segments', 'Segments')
			]) }}
		{# ,('donor_types', 'Donor Types') #}

			<!-- Sponsorship -->
			{{ blueprintNavItem('sponsorship', 2,
				[('overview', 'Overview')
				,('pledge_income_fy', 'Revenue by Financial Year')
				,('pledges', 'Created by Financial Year')
				,('delinquency', 'Delinquency Warning')
			]) }}

			<!-- Journey -->
			{{ blueprintNavItem('journey', 2,
				[('cure_one', 'Cure One Stewardship')
				,('cure_one_acquisition', 'Cure One Acquisition')
				,('general_new', 'General New Donor Journey')
				,('merchandise_new', 'New Merchandise Customer')
			]) }}

			<!-- Merchandise -->
			{{ blueprintNavItem('merchandise', 2,
				[('track_order', 'REX Order Tracking')
				,('upload', 'REX RFM Analysis')
				,(none, none)
				,('merchandise_new_courtesy_call', 'Todo : New Customer Courtesy Call')
				,('merchandise_new_welcome_pack', 'Todo : New Customer Welcome Pack')

			]) }}

			<!-- Budget -->
			{{ blueprintNavItem('budget', 2,
				[('scoping_fy20', 'FY20 Budget Scoping')
			]) }}

			<!-- API -->
			{{ blueprintNavItem('api', 1,
				[('index', 'API')
			]) }}

		</ul>

		{% if current_user.is_authenticated %}
		<form class="form-inline my-2 my-md-0">
			<a href="/logout" class="btn btn-outline-warning btn-sm" role="button" aria-pressed="true">Logout</a>
		</form>
		{% endif %}
	</div>
</nav>
